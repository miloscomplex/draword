(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(19),c=n.n(o),s=(n(34),n(6)),i=(n(35),n(10)),l=n(9),u=n(2),d=n(5),h=n(4),m=n(3),p=n(0),j=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{id:"nav",children:[Object(p.jsx)(i.b,{to:"/new",children:"New Game"}),Object(p.jsx)(i.b,{to:"/how-to-play",children:"How To Play"}),Object(p.jsx)(i.b,{to:"/leaderboard",children:"Leaderboard"})]})}}]),n}(a.a.Component),b=n(8),f=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{id:"header",children:[Object(p.jsx)("h1",{children:Object(p.jsx)(i.b,{to:"/",children:"draword"})}),Object(p.jsx)(j,{})]})}}]),n}(a.a.Component),O=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("h2",{children:["Hi there, ",this.props.currentUser.name]}),Object(p.jsxs)("p",{children:["I know, I know, ",Object(p.jsx)("strong",{children:this.props.currentUser.name})," isn't your name, but keeping with the theme it's your alias in the chat window. Click on a button to get this party started. If you only see the 'I will guess' button that means someone is already drawing in this room."]}),!this.props.drawer_id&&Object(p.jsx)("button",{className:"button, smaller",onClick:function(t){return e.props.handleDrawClick({type:"drawer"})},children:"I will draw"}),Object(p.jsx)("button",{className:"button, smaller",onClick:function(t){return e.props.handleGuessClick({type:"guesser"})},children:"I will guess"})]})}}]),n}(a.a.Component),v=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).phraseList=function(t){return t.map((function(t){return Object(p.jsxs)("li",{onClick:function(n){return e.props.handleClick(t.id)},children:[" ",t.phrase," "]},t.id)}))},e}return Object(d.a)(n,[{key:"render",value:function(){return console.log("this.props.match= ",this.props.match),Object(p.jsx)("div",{children:Object(p.jsx)("ul",{className:"phrases",children:this.phraseList(this.props.phrases)})})}}]),n}(a.a.Component),g="http://localhost:3000",y=function(e){return e.json()},x={"Content-Type":"application/json",Accept:"application/json"};function R(){return function(e){e({type:"LOADING_ROOMS"}),fetch("".concat(g,"/rooms")).then(y).then((function(t){return e({type:"ADD_ROOMS",payload:t})}))}}function C(e){return function(t){t({type:"LOADING_ROOM"}),fetch("".concat(g,"/rooms/").concat(e)).then(y).then((function(e){return t({type:"UPDATE_SELECTED_ROOM",payload:e})})).then((function(e){return console.log("setSelectedRoom",e)})).catch((function(e){return console.log("err= ",e)}))}}function w(e){return function(t){t({type:"FETCHING"}),fetch("".concat(g,"/rooms/").concat(e.room_id),{method:"PUT",headers:x,body:JSON.stringify(e)}).then(y).then((function(e){return t({type:"UPDATE_SELECTED_ROOM",payload:e})}))}}function S(e){return function(t){t({type:"FETCHING"}),fetch("".concat(g,"/users/").concat(e.user_id),{method:"PUT",headers:x,body:JSON.stringify(e)}).then(y).then((function(e){return t({type:"UPDATE_USER",payload:e})}))}}var k=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentWillUnmount=function(){console.log("PhraseSelector umounted!")},e.componentDidMount=function(){e.props.loadPhrases()},e.handleClick=function(t){e.props.editSelectedRoom({room_id:e.props.selectedRoom.id,selected_phrase_id:t,status:"playing"})},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsxs)("div",{className:"phrase-selector",children:[Object(p.jsx)("h2",{children:"Phrase Selector"}),Object(p.jsx)("p",{className:"description",children:"Select One of the phrases/words below to draw."}),Object(p.jsx)(v,{phrases:this.props.phrases,handleClick:this.handleClick,match:this.props.match})]})})}}]),n}(a.a.Component),_=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,phrases:e.phrases.phrasesList,busySignal:e.busySignal,currentUser:e.users.user}}),(function(e){return{loadPhrases:function(){e((function(e){fetch("".concat(g,"/random-phrases")).then(y).then((function(t){return e({type:"ADD_PHRASES",payload:t})}))}))},editSelectedRoom:function(t){e(w(t))}}}))(k),D=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadMainGamePlay=function(){},e.componentDidMount=function(){setTimeout(e.loadMainGamePlay,500)},e}return Object(d.a)(n,[{key:"render",value:function(){this.props.match;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"The drawee is selecting a phrase"}),Object(p.jsx)("p",{className:"description",children:"The game will appear once they have decided on a clue"})]})}}]),n}(a.a.Component),E=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom}}),(function(e){return{updateLocalStatus:function(t){return e({type:"UPDATE_LOCAL_STATUS",payload:t})}}}))(D),T=(a.a.Component,function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.match,e.handleDrawClick);return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)("h2",{children:"There's not an active drawer yet"}),!this.props.drawer_id&&Object(p.jsx)("button",{className:"button, smaller",onClick:function(e){return t({type:"drawer"})},children:"I will draw"})]})}}]),n}(a.a.Component)),U=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderContent=function(){var t=e.props,n=t.selectedRoom,r=t.currentUser;switch(n.drawer_id){case r.id:return Object(p.jsx)(_,{match:e.props.match});case null:return Object(p.jsx)(T,{match:e.props.match,handleDrawClick:e.props.handleDrawClick});default:return Object(p.jsx)(E,{match:e.props.match})}},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"wrapper",children:this.renderContent()})}}]),n}(a.a.Component),A=n(28),N=n.n(A).a.createConsumer("ws://localhost:3000/cable"),P=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).timerChannel=function(){r.timerChannelRef=N.subscriptions.create({channel:"TimersChannel",room_id:r.props.selectedRoom.id},{connected:function(){console.log("timerChannel connected!")},disconnected:function(){console.log("timerChannel disconnected!")},received:function(e){r.handleReceivedData(e),console.log("timerChannel data received",e)}})},r.handleReceivedData=function(e){r.setState({time:Math.round((Date.now()-r.state.start)/1e3)})},r.startTimer=function(){r.timer=setInterval((function(){r.props.editSelectedRoom({room_id:r.state.room_id,timer:r.interval()},1e3)}))},r.interval=function(){return console.log("this.stat.time",r.state.time),Math.round((Date.now()-r.state.start)/1e3)},r.stopTimer=function(){r.setState({isOn:!1}),clearInterval(r.timer)},r.resetTimer=function(){r.setState({time:0,isOn:!1})},r.elapsedTime=function(){r.endTime=new Date;var e=r.endTime-r.startTime;return r.stopTime=Math.round(e/1e3),r.stopTime},r.componentDidMount=function(){r.setState({isOn:!0,time:r.state.time,start:Date.now()-r.state.time})},r.componentWillUnmount=function(){r.stopTimer()},r.state={room_id:r.props.match.params.id,time:0,isOn:!1,start:0},r.timerChannelRef=null,r}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"timer",children:["Elapsed Time: ",this.state.time]})}}]),n}(a.a.Component),L=Object(b.b)(null,(function(e){return{editSelectedRoom:function(t){e(w(t))}}}))(P),I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"timer",children:"Elapsed Time:"})}}]),n}(a.a.Component),M=(a.a.Component,n(17)),G=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{id:"toolbox",children:Object(p.jsx)("li",{onClick:function(t){return e.props.handleClearClick(t)},children:"clear"})})}}]),n}(a.a.Component),H=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.canvasChannelRef.unsubscribe()},r.handleGetFetch=function(){fetch("".concat(g,"/canvas/").concat(r.state.roomId)).then((function(e){return e.json()})).then((function(e){return r.setState({drawings:e})}))},r.canvasChannel=function(){r.canvasChannelRef=N.subscriptions.create({channel:"CanvasChannel",id:r.state.roomId},{connected:function(){console.log("CanvasChannel connected!")},disconnected:function(){console.log("CanvasChannel disconnected!")},received:function(e){r.dataCache=e,r.drawOnCanvas(e)}})},r.handlePostFetch=function(e){r.dataCache!==e&&fetch("".concat(g,"/canvas"),{method:"POST",headers:x,body:JSON.stringify(e)})},r.handleReceivedCanvasObj=function(e){var t=e.drawing;t!==r.state.drawings&&r.setState({drawings:[].concat(Object(M.a)(r.state.drawings),[t])})},r.startDrawing=function(e){if(!r.state.isDrawing){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;r.setState({isDrawing:!0}),r.handlePostFetch({action:"beginPath",offsetX:n,offsetY:a,room_id:r.state.roomId})}},r.stopDrawing=function(e){if(r.state.isDrawing){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;r.setState({isDrawing:!1}),r.handlePostFetch({action:"closePath",offsetX:n,offsetY:a,room_id:r.state.roomId})}},r.drawing=function(e){if(r.state.isDrawing){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;r.handlePostFetch({action:"lineTo",offsetX:n,offsetY:a,room_id:r.state.roomId})}},r.configCanvas=function(){var e=r.canvasRef.current;e.width=r.state.canvasWidth,e.height=r.state.canvasHeight,e.style.width="".concat(r.state.canvasWidth,"px"),e.style.height="".concat(r.state.canvasHeight,"px");var t=e.getContext("2d");t.lineCap="round",t.lineJoin="round",t.strokeStyle=r.state.color,t.lineWidth=r.state.lineWidth,t.miterLimit=2,r.contextRef.current=t},r.drawOnCanvas=function(e){var t=e.offsetX,n=e.offsetY,a=r.contextRef.current;switch(e.action){case"beginPath":a.beginPath(),a.moveTo(t,n),r.setState({isDrawing:!0}),a.stroke();break;case"lineTo":a.lineTo(t,n),a.stroke();break;case"closePath":a.closePath();a.save();r.setState({isDrawing:!1});break;case"clearCanvas":a.fillStyle=r.state.bgColor,a.fillRect(0,0,r.state.canvasWidth,r.state.canvasHeight);break;default:return}},r.handleClearClick=function(e){r.handlePostFetch({action:"clearCanvas",room_id:r.state.roomId})},r.canvasRef=a.a.createRef(),r.contextRef=a.a.createRef(),r.state={isDrawing:!1,color:"yellow",lineWidth:7,drawings:[],canvasWidth:500,canvasHeight:500,roomId:r.props.match.params.id,canDraw:!0,bgColor:"#000000"},r.dataCache=null,r.canvasChannelRef=null,r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.configCanvas(),this.handleGetFetch(),this.canvasChannel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.selectedRoom;return n.id===r.drawer_id?Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("canvas",{onMouseDown:function(t){return e.startDrawing(t)},onMouseUp:function(t){return e.stopDrawing(t)},onMouseMove:function(t){return e.drawing(t)},onMouseLeave:function(t){return e.stopDrawing(t)},ref:this.canvasRef}),Object(p.jsx)(G,{handleClearClick:this.handleClearClick})]}):Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("canvas",{ref:this.canvasRef})})}}]),n}(a.a.Component),W=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,currentUser:e.users.user}}))(H),F=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={text:"",room_id:e.props.roomId,role:e.props.selectedRoom.drawer_id===e.props.currentUser.id?"drawer":"guesser",name:e.props.currentUser.name},e.handleOnChange=function(t){e.setState({text:t.target.value})},e.handleOnSubmit=function(t){t.preventDefault(),fetch("".concat(g,"/chats"),{method:"POST",headers:x,body:JSON.stringify(e.state)}),e.setState({text:""})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{name:"chatBoxForm",onSubmit:function(t){return e.handleOnSubmit(t)},children:[Object(p.jsx)("input",{type:"text",minLength:"2",value:this.state.text,onChange:this.handleOnChange}),Object(p.jsx)("button",{value:"submit",children:"submit"})]})}}]),n}(a.a.Component),J=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("p",{className:this.props.role,children:[Object(p.jsx)("span",{children:this.props.role}),Object(p.jsxs)("strong",{children:[this.props.name,":"]})," ",this.props.text]})}}]),n}(a.a.Component),Y=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).joined={text:"has joined the game",room_id:e.props.roomId,role:"admin",name:e.props.currentUser.name},e.left={text:"has left the game",room_id:e.props.roomId,role:"admin",name:e.props.currentUser.name},e.myCallback=function(e){fetch("".concat(g,"/chats"),{method:"POST",headers:x,body:JSON.stringify(e)})},e.componentDidMount=function(){e.myCallback(e.joined)},e.componentWillUnmount=function(){},e.render=function(){return""},e}return n}(a.a.Component),B=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).chatsChannelRef=null,e.roomURL=e.props.match.params.id,e.componentDidMount=function(){console.log("chatArea mounted!"),e.scrollToBottom(),e.props.loadChats(e.roomURL),e.chatsChannel()},e.componentDidUpdate=function(){e.scrollToBottom()},e.scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e.chatsChannel=function(){e.chatsChannelRef=N.subscriptions.create({channel:"ChatsChannel",id:e.props.selectedRoom.id},{connected:function(){console.log("ChatsChannel connected!")},disconnected:function(){console.log("ChatsChannel disconnected!")},received:function(t){e.handleReceivedChat(t),console.log("ChatsChannel data received")}})},e.componentWillUnmount=function(){e.chatsChannelRef.unsubscribe(),console.log("subscriptionRef",e.chatsChannelRef),console.log("subscriptionRef2",e.chatsChannelRef)},e.handleReceivedChat=function(t){var n=t.chat;e.checkForPhrase(n,e.props.selectedRoom.phrase),e.props.addChat(n)},e.handleWin=function(t,n){e.props.editSelectedRoom({room_id:e.props.selectedRoom.id,status:n})},e.checkForPhrase=function(t,n){console.log("checkForPhrase= ",n);n&&t.text.toLowerCase().includes(n.phrase.toLowerCase())&&e.handleWin(n,"end")},e.render=function(){var t=e.props.selectedRoom.chats,n=e.props,r=n.currentUser,a=n.selectedRoom;return Object(p.jsxs)("div",{id:"chatWindow",children:[Object(p.jsx)("h2",{children:"Chat Window"}),Object(p.jsxs)("div",{ref:e.chatContainer,className:"chat-messages",children:[V(t)?V(t):K,Object(p.jsx)("div",{className:"scroll-fix",ref:function(t){e.messagesEnd=t}})]}),Object(p.jsx)(F,{roomId:e.roomURL,currentUser:r,selectedRoom:a}),Object(p.jsx)(Y,{roomId:e.roomURL,currentUser:r})]})},e}return n}(a.a.Component),X=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,busySignal:e.busySignal}}),(function(e){return{loadChats:function(t){e(function(e){return function(t){fetch("".concat(g,"/rooms/").concat(e)).then(y).then((function(e){return t({type:"LOAD_CHATS",payload:e})}))}}(t))},addChat:function(t){e(function(e){return function(t){t({type:"ADD_CHAT",payload:e})}}(t))},editSelectedRoom:function(t){e(w(t))}}}))(B),V=function(e){return e.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)})).map((function(e){return Object(p.jsx)(J,{text:e.text,role:e.role,name:e.name},e.id)}))},K="Wow Such Empty",q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.selectedRoom;return t.id===n.drawer_id?Object(p.jsxs)("div",{className:"phraseReminder",children:["Hey, ",Object(p.jsx)("strong",{children:t.name}),"! Your phrase/word is ",Object(p.jsx)("strong",{children:this.props.selectedRoom.phrase.phrase})]}):Object(p.jsxs)("div",{className:"phraseReminder",children:["Hey, ",Object(p.jsx)("strong",{children:t.name}),"! Remember to think of popular Karaoke songs"]})}}]),n}(a.a.Component),z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props.match.params.id;e.props.setSelectedRoom(t),console.log("match= ",e.props.match)},e.whichTimer=function(){var t=e.props,n=t.currentUser,r=t.selectedRoom,a=t.match;return n.id===r.drawer_id?Object(p.jsx)(L,{match:a}):Object(p.jsx)(I,{match:a})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selectedRoom,n=e.currentUser,r=e.match;return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(q,{selectedRoom:t,currentUser:n}),Object(p.jsxs)("div",{id:"wrapper",children:[Object(p.jsxs)("div",{id:"canvas",children:[Object(p.jsx)(W,{match:r}),this.whichTimer()]}),Object(p.jsx)(X,{match:r,currentUser:n})]})]})}}]),n}(a.a.Component),Q=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,selectedPhrase:e.selectedPhrase,currentUser:e.users.user}}),(function(e){return{setSelectedRoom:function(t){e(C(t))}}}))(z),Z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).matchId=e.props.match.params.id,e.componentDidMount=function(){e.props.setSelectedRoom(e.matchId),console.log("match= ",e.props.match)},e.handleClick=function(){var t=e.props;t.selectedRoom,t.editSelectedRoom;e.props.editSelectedRoom({room_id:e.props.selectedRoom.id,status:"preplay",selected_phrase_id:null,drawer_id:null})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.selectedRoom;return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("h2",{children:["Wow you won ! ","The correct answer was ".concat(t.phrase.phrase)]}),Object(p.jsx)("p",{children:"Good Job room: ".concat(t.title,"! This is the end of Game")}),Object(p.jsx)("button",{onClick:function(t){return e.handleClick()},children:"start over"})]})}}]),n}(a.a.Component),$=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom}}),(function(e){return{editSelectedRoom:function(t){e(w(t))}}}))(Z),ee=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("h2",{children:["Hi there, ",this.props.currentUser.name]}),Object(p.jsx)("h3",{children:"The drawer left the game. So it has reset."}),!this.props.drawer_id&&Object(p.jsx)("button",{className:"button, smaller",onClick:function(t){return e.props.handleDrawClick({type:"drawer"})},children:"I will draw"}),Object(p.jsx)("button",{className:"button, smaller",onClick:function(t){return e.props.handleGuessClick({type:"guesser"})},children:"I will guess"})]})}}]),n}(a.a.Component),te=n(15),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e};var re={phrasesList:[]};var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PHRASES":return Object(s.a)(Object(s.a)({},e),{},{phrasesList:t.payload});case"LOAD_PHRASES":return t.payload;default:return e}},oe={loading:!1,roomsList:[],selectedRoom:""};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CHAT":return Object(s.a)(Object(s.a)({},e),{},{chats:t.payload.chats});case"ADD_CHAT":var n=t.payload;return Object(s.a)(Object(s.a)({},e),{},{selectedRoom:Object(s.a)(Object(s.a)({},e.selectedRoom),{},{chats:[].concat(Object(M.a)(e.selectedRoom.chats),[n])})});case"LOADING_ROOMS":case"LOADING_ROOM":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"ADD_ROOMS":return Object(s.a)(Object(s.a)({},e),{},{roomsList:t.payload,loading:!1});case"UPDATE_SELECTED_ROOM":return Object(s.a)(Object(s.a)({},e),{},{selectedRoom:t.payload,loading:!1});case"UPDATE_LOCAL_STATUS":return Object(s.a)(Object(s.a)({},e),{},{selectedRoom:Object(s.a)(Object(s.a)({},e.selectedRoom),{},{status:t.payload})});case"REMOVE_SELECTED_ROOM":return Object(s.a)(Object(s.a)({},e),{},{selectedRoom:""});case"LOAD_ROOM":return Object(s.a)(Object(s.a)({},e),{},{roomsList:Object(s.a)(Object(s.a)({},e.roomsList),{},{roomsList:t.payload})});case"RELEASE_PHRASE":return Object(s.a)(Object(s.a)({},e),{},{selectedRoom:Object(s.a)(Object(s.a)({},e.selectedRoom),{},{selected_phrase_id:null,selectedPhrase:null})});default:return e}};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING":return!0;case"ADD_PHRASES":case"LOAD_ROOMS":case"ADD_ROOMS":case"UPDATE_USER":case"LOAD_CHATS":case"UPDATE_SELECTED_ROOM":return!1;default:return e}},ie={loading:!1,user:[]};var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USER":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"CREATE_USER":case"UPDATE_USER":return Object(s.a)(Object(s.a)({},e),{},{user:t.payload,loading:!1});case"REMOVE_USER":return Object(s.a)(Object(s.a)({},e),{},{user:[]});default:return e}},ue={loading:!1};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_TIMER":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"UPDATE_TIMER":return Object(s.a)(Object(s.a)({},e),{},{timer:t.payload,loading:!1});default:return e}},he=Object(te.c)({canvas:ne,phrases:ae,busySignal:se,rooms:ce,users:le,timer:de}),me=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).matchObj=e.props.match,e.matchId=e.props.match.params.id,e.gamePlayChannelRef=null,e.gamePlayChannel=function(){e.gamePlayChannelRef=N.subscriptions.create({channel:"RoomChannel",room_id:e.props.selectedRoom.id,user_id:e.props.currentUser.id},{connected:function(){console.log("RoomChannel connected!")},disconnected:function(){console.log("RoomChannel disconnected!")},received:function(t){!t.current_time&&e.handleReceivedData(t),console.log("RoomChannel data received",t)}})},e.componentDidMount=function(){e.gamePlayChannel()},e.componentWillUnmount=function(){console.log("GamePlay unmounted"),e.gamePlayChannelRef.unsubscribe()},e.handleReceivedData=function(t){e.props.broadcastRoomStatus(t)},e.handleDrawClick=function(t){var n=e.props,r=n.currentUser,a=n.selectedRoom;e.props.editSelectedRoom({room_id:a.id,drawer_id:r.id,status:"start"})},e.handleGuessClick=function(t){e.props.editSelectedRoom({room_id:e.matchId,status:"start"})},e.renderBusy=function(){return Object(p.jsx)("span",{className:"loading-message",children:" "})},e.renderContent=function(){var t=e.props,n=t.selectedRoom,r=t.currentUser,a=t.match,o=(t.busySignal,t.setSelectedRoom);t.editSelectedRoom;switch(e.props.gameStatus){case"preplay":return Object(p.jsx)(O,{drawer_id:n.drawer_id,currentUser:r,handleDrawClick:e.handleDrawClick,handleGuessClick:e.handleGuessClick});case"start":return Object(p.jsx)(U,{handleDrawClick:e.handleDrawClick,selectedRoom:n,currentUser:r,drawer_id:n.drawer_id});case"playing":return Object(p.jsx)(Q,{match:a});case"end":return Object(p.jsx)($,{match:a,setSelectedRoom:o});case"drawerLeft":return Object(p.jsx)(ee,{match:a,currentUser:r,setSelectedRoom:o,drawer_id:n.drawer_id,handleDrawClick:e.handleDrawClick,handleGuessClick:e.handleGuessClick});default:return Object(p.jsx)("h2",{children:"Something isn't quite right..."})}},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:this.renderContent()})}}]),n}(a.a.Component),pe=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,gameStatus:e.rooms.selectedRoom.status,selectedPhrase:e.selectedPhrase,currentUser:e.users.user,busySignal:e.busySignal}}),(function(e){return{getPhrase:function(t){e(function(e){return function(t){t({type:"FETCHING"}),fetch("".concat(g,"/phrases/").concat(e)).then(y).then((function(e){return t({type:"SET_ROOM_PHRASE",payload:e})}))}}(t))},releasePhrase:function(t){e(w(t))},editUser:function(t){e(S(t))},addUserToRoom:function(t){e(S(t))},loadRooms:function(){e(R())},editSelectedRoom:function(t){e(w(t))},setSelectedRoom:function(t){e(C(t))},broadcastRoomStatus:function(t){e(function(e){return function(t){t({type:"UPDATE_SELECTED_ROOM",payload:e.room}),console.log("broadcastRoomStatus",e.room)}}(t))}}}))(me),je=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).matchObj=e.props.match,e.matchId=e.props.match.params.id,e.componentDidMount=function(){var t=e.props.currentUser;e.props.createOrFindUser({user_id:t.id,room_id:e.matchId}),e.props.setSelectedRoom(e.matchId)},e.componentWillUnmount=function(){console.log("GameContainer unmounted!")},e.renderBusy=function(){return Object(p.jsx)("span",{className:"loading-message",children:" "})},e.uhOh=function(){return Object(p.jsxs)("h2",{children:["Whoops! something went wrong maybe ",Object(p.jsx)("code",{children:e.matchObj.url})," isn't a valid room"]})},e.renderGamePlay=function(){return e.props.loadingUser?e.renderBusy():Object(p.jsx)(pe,{match:e.matchObj})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.selectedRoom;return Object(p.jsx)("div",{children:e?this.renderGamePlay():this.uhOh()})}}]),n}(a.a.Component),be=Object(b.b)((function(e){return{selectedRoom:e.rooms.selectedRoom,currentUser:e.users.user,loadingUser:e.users.loading}}),(function(e){return{setSelectedRoom:function(t){e(C(t))},editSelectedRoom:function(t){e(w(t))},createOrFindUser:function(t){var n;e((n=t,function(e){e({type:"LOADING_USER"}),fetch("".concat(g,"/users"),{method:"POST",headers:x,body:JSON.stringify(n)}).then(y).then((function(t){return e({type:"UPDATE_USER",payload:t})}))}))}}}))(je),fe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={counter:0,hearts:[]},e.addHeart=function(t,n){console.log("i was clicked");var r=Object(M.a)(e.state.hearts);r[t]?r[t].count=r[t].count+1:r[t]={count:1},e.setState({hearts:r})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.leaders.map((function(t,n){return Object(p.jsxs)("li",{children:[" ",t.name,", score: ",t.score,", time: ",t.time,Object(p.jsxs)("a",{name:n,onClick:function(){return e.addHeart(n,e.state.hearts[n]?e.state.hearts[n].count:0)},className:"heart",children:[" heart(s): ",e.state.hearts[n]?e.state.hearts[n].count:0]},n)]},n)}));return Object(p.jsx)("ul",{children:t})}}]),n}(a.a.Component),Oe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={leaders:[{name:"John Smith",score:240,time:23},{name:"Reggy Uptown",score:340,time:45},{name:"Sue Runner",score:140,time:50}]},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsxs)("div",{className:"leaderboard",children:[Object(p.jsx)("h2",{children:"Leaderboard"}),Object(p.jsx)("p",{className:"description",children:"Here's the top team submissions"}),Object(p.jsx)(fe,{leaders:this.state.leaders})]})})}}]),n}(a.a.Component),ve=Object(b.b)((function(e){return{state:e}}))(Oe),ge=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsxs)("div",{className:"how-to-play",children:[Object(p.jsx)("h1",{children:"How To Play"}),Object(p.jsx)("p",{children:"I'm baby tote bag photo booth chia listicle. Activated charcoal selfies quinoa raclette offal mustache. Hexagon taxidermy kitsch godard raw denim meh knausgaard listicle next level PBR&B lyft fingerstache normcore. Chambray wolf meggings health goth. Kogi poutine kickstarter master cleanse artisan edison bulb gochujang viral tbh biodiesel etsy keffiyeh yuccie schlitz waistcoat. Waistcoat mixtape brunch tacos, drinking vinegar plaid literally. Everyday carry tote bag palo santo, messenger bag cornhole leggings vegan artisan retro iceland listicle slow-carb hoodie fam mixtape."})]})})}}]),n}(a.a.Component),ye=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={title:"",status:"preplay"},e.handleChange=function(t){e.setState({title:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),t.stopPropagation(),fetch("".concat(g,"/rooms"),{method:"POST",headers:x,body:JSON.stringify(e.state)}),e.setState({title:""})},e.render=function(){return Object(p.jsx)("div",{className:"newRoomForm",children:Object(p.jsxs)("form",{name:"newRoomForm",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("label",{children:"Create A New Room (3-15) characters-long:"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",value:e.state.title,onChange:e.handleChange}),Object(p.jsx)("button",{value:"submit",children:"submit"})]})})},e}return n}(a.a.Component),xe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("li",{children:[Object(p.jsx)(i.b,{className:"room",to:"/rooms/".concat(this.props.id),children:this.props.title}),Object(p.jsxs)("p",{className:"status",children:["game status:",Object(p.jsxs)("span",{children:[" ",this.props.status]})]}),Object(p.jsx)("p",{className:"button",children:Object(p.jsx)(i.b,{to:"/rooms/".concat(this.props.id),children:"enter room"})})]})}}]),n}(a.a.Component),Re=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){N.disconnect(),N.subscriptions.subscriptions.forEach((function(e){e.unsubscribe()})),e.props.loadRooms(),e.roomsChannel(),e.props.removeSelectedRoom()},e.componentWillUnmount=function(){N.disconnect(),N.subscriptions.subscriptions.forEach((function(e){e.unsubscribe()}))},e.roomsChannel=function(){N.subscriptions.create({channel:"RoomsChannel"},{connected:function(){console.log("RoomsChannel connected!")},disconnected:function(){console.log("RoomsChannel disconnected!")},received:function(t){e.handleReceivedRoom(t),console.log("RoomsChannel data received")}})},e.handleReceivedRoom=function(t){e.props.loadRooms()},e.mapRooms=function(e){return e.map((function(e){return Object(p.jsx)(xe,{id:e.id,title:e.title,status:e.status},e.id)}))},e.loading=function(){return Object(p.jsx)("span",{className:"loading-message",children:" "})},e.render=function(){var t=e.props,n=(t.rooms,t.loadingRooms);return Object(p.jsxs)("div",{className:"roomsList",children:[Object(p.jsx)("h1",{children:"Rooms"}),Object(p.jsx)("p",{children:"Select a room or create a new one"}),Object(p.jsx)("ul",{children:n?e.loading():e.mapRooms(e.props.rooms)}),Object(p.jsx)(ye,{})]})},e}return n}(a.a.Component),Ce=Object(b.b)((function(e){return{rooms:e.rooms.roomsList,loadingRooms:e.rooms.loading}}),(function(e){return{loadRooms:function(){e(R())},removeSelectedRoom:function(){return e({type:"REMOVE_SELECTED_ROOM"})}}}))(Re),we=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("div",{className:"landing-page",children:[Object(p.jsx)("h1",{children:"Hey there, welcome to Draword."}),Object(p.jsx)("h3",{children:"The current theme for the game is Popular Karaoke Song."}),Object(p.jsx)("p",{children:"So try to think of songs that you'd chose to slay the microphone, if your guessing. The title is only necessary, not the artist, to win the round. If you decide to draw, draw your heart out and keep a 'Never Gonna Give You Up' attitude until either time expires or the word is correctly guessed."}),Object(p.jsx)("p",{children:"If you like to draw, either choose a room that is marked 'You can draw' or make your own room. Then share the URL with your friends to start the game."}),Object(p.jsx)("p",{children:"If you want to guess, select a room that is marked 'be a guesser.' You'll receive updates via the chat box in regards to the gameplay."}),Object(p.jsx)("p",{className:"strong",children:"Good Luck!"})]}),Object(p.jsx)(Ce,{})]})}}]),n}(a.a.Component),Se=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{id:"footer",children:Object(p.jsxs)("p",{children:[Object(p.jsx)(i.b,{to:"/",children:"Draword"}),Object(p.jsx)(i.b,{className:"footer-link",to:"/new",children:"New Game"}),Object(p.jsx)(i.b,{className:"footer-link",to:"/how-to-play",children:" How To Play"}),Object(p.jsx)(i.b,{className:"footer-link",to:"/leaderboard",children:"Leaderboard"})]})})}}]),n}(a.a.Component),ke=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Hmm... Something isn't right"}),Object(p.jsxs)("p",{children:["Whoops! something went wrong maybe ",Object(p.jsx)("strong",{children:Object(p.jsx)("code",{children:this.props.match.url})})," isn't a valid URL"]})]})}}]),n}(a.a.Component);var _e=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(f,{}),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{exact:!0,path:"/",component:we}),Object(p.jsx)(l.a,{exact:!0,path:"/new",component:Ce}),Object(p.jsx)(l.a,{exact:!0,path:"/leaderboard",component:ve}),Object(p.jsx)(l.a,{exact:!0,path:"/how-to-play",component:ge}),Object(p.jsx)(l.a,{exact:!0,path:"/rooms",component:Ce}),Object(p.jsx)(l.a,{exact:!0,path:"/rooms/:id",render:function(e){return Object(p.jsx)(be,Object(s.a)({},e))}}),Object(p.jsx)(l.a,{path:"*",render:function(e){return Object(p.jsx)(ke,Object(s.a)({},e))}})]}),Object(p.jsx)(Se,{})]})})},De=n(29),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d,Te=Object(te.e)(he,Ee(Object(te.a)(De.a)));c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(b.a,{store:Te,children:Object(p.jsx)(_e,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e095fb53.chunk.js.map